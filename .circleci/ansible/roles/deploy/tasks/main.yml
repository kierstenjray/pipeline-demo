---
  - name: "show remote environment"
    shell: env

  - name: "Create directory"
    become: true
    file:
      path: /home/ubuntu/uda_people
      state: directory
      owner: ubuntu
      group: ubuntu
      mode: 0755

  - name: Copy backend files
    become: true
    copy:
      src: /root/project/backend
      dest: /home/ubuntu/uda_people/
      owner: ubuntu
      group: ubuntu
      mode: 0755

  - name: "Check for tar file"
    become: true
    command:
      ls -l /home/ubuntu/uda_people/

  - name: Unarchive a file that is already on the remote machine
    ansible.builtin.unarchive:
       remote_src: yes
       src: /home/ubuntu/uda_people/backend.tar.gz
       dest: /home/ubuntu/uda_people

  - name: "Check and install npm"
    become: true
    command: npm install
    args:
      chdir: /home/ubuntu/uda_people/backend